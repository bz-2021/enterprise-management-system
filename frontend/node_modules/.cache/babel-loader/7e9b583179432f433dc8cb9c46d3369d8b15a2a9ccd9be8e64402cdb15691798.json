{"ast":null,"code":"import { mapState } from \"vuex\";\nexport default {\n  inject: [\"reload\"],\n  data() {\n    return {\n      dialogVisible: false,\n      nowEmployeeid: \"\",\n      user: \"\",\n      myname: \"\",\n      level: \"\",\n      status: \"\",\n      gender: \"\",\n      photo: \"\",\n      ethnicity: \"\",\n      birthday: \"\",\n      politicalFace: \"\",\n      education: \"\",\n      id_card: \"\",\n      phone_number: \"\",\n      e_mail: \"\",\n      username: \"\",\n      account: \"\",\n      did: \"\",\n      password: \"\",\n      input: \"\"\n    };\n  },\n  methods: {\n    handleClose(done) {\n      this.$confirm(\"确认关闭？\").then(_ => {\n        done();\n      }).catch(_ => {});\n    },\n    showDetail(id) {\n      this.$store.dispatch(\"getAttendance\", id).then(res => {\n        this.$alert(`<strong>缺勤:${this.attendance.absence}次 出席:${this.attendance.attendance}次  迟到:${this.attendance.late}次 早退:${this.attendance.leave_early}次 加班:${this.attendance.overtime}次</strong>`, \"考勤信息\", {\n          dangerouslyUseHTMLString: true\n        });\n      });\n    },\n    updateAttendance() {\n      this.dialogVisible = false;\n      var data = {\n        id: this.nowEmployeeid,\n        status: this.input\n      };\n      this.$store.dispatch(\"updateAttendance\", data).then(res => {\n        alert(res);\n      });\n    }\n  },\n  computed: {\n    ...mapState({\n      userlist: state => state.userlist,\n      attendance: state => state.attendance\n    })\n  },\n  mounted: function () {\n    this.$store.dispatch(\"getList\");\n  }\n};","map":{"version":3,"mappings":"AAoIA;AACA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA,uBACAC;QACAC;MACA,GACAC;IACA;IACAC;MACA;QACA,YACA,qLACA,QACA;UACAC;QACA,EACA;MACA;IACA;IACAC;MACA;MAEA;QACAC;QACAvB;MACA;MACA;QACAwB;MACA;IACA;EACA;EACAC;IACA;MACAC;MACAC;IACA;EACA;EACAC;IACA;EACA;AACA","names":["inject","data","dialogVisible","nowEmployeeid","user","myname","level","status","gender","photo","ethnicity","birthday","politicalFace","education","id_card","phone_number","e_mail","username","account","did","password","input","methods","handleClose","then","done","catch","showDetail","dangerouslyUseHTMLString","updateAttendance","id","alert","computed","userlist","attendance","mounted"],"sourceRoot":"src/pages/system/systemattend","sources":["index.vue"],"sourcesContent":["<template>\r\n\t<div class=\"hello\">\r\n\t\t<div class=\"row\">\r\n\t\t\t<div class=\"col-3\">\r\n\t\t\t\t<div class=\"card-body\">\r\n\t\t\t\t\t<h3> 考勤管理 </h3>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"col-4\"></div>\r\n\t\t\t<div class=\"col-5\"> </div>\r\n\t\t</div>\r\n\t\t<table class=\"table table-bordered\" style=\"width: 96%; margin-top: 4vh\">\r\n\t\t\t<thead>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th scope=\"col\">员工ID</th>\r\n\t\t\t\t\t<th scope=\"col\">姓名</th>\r\n\t\t\t\t\t<th scope=\"col\">级别</th>\r\n\t\t\t\t\t<th scope=\"col\">职位</th>\r\n\t\t\t\t\t<th scope=\"col\">性别</th>\r\n\t\t\t\t\t<th scope=\"col\">文化程度</th>\r\n\t\t\t\t\t<th scope=\"col\">照片</th>\r\n\t\t\t\t\t<th scope=\"col\">政治面貌</th>\r\n\t\t\t\t\t<th scope=\"col\">民族</th>\r\n\t\t\t\t\t<th scope=\"col\">操作</th>\r\n\t\t\t\t</tr>\r\n\t\t\t</thead>\r\n\t\t\t<tbody>\r\n\t\t\t\t<tr class=\"item\" v-for=\"(item, index) in userlist\">\r\n\t\t\t\t\t<th scope=\"row\">{{ item.id }}</th>\r\n\t\t\t\t\t<td>{{ item.name }}</td>\r\n\t\t\t\t\t<td>{{ item.level }}</td>\r\n\t\t\t\t\t<td>{{ item.status }}</td>\r\n\t\t\t\t\t<td>{{ item.gender }}</td>\r\n\t\t\t\t\t<td>{{ item.education }}</td>\r\n\t\t\t\t\t<td>{{ item.photo }}</td>\r\n\t\t\t\t\t<td>{{ item.politicalFace }}</td>\r\n\t\t\t\t\t<td>{{ item.ethnicity }}</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\tstyle=\"width: 25%\"\r\n\t\t\t\t\t\t\tclass=\"btn btn-outline-primary btn-sm\"\r\n\t\t\t\t\t\t\t@click=\"showDetail(item.id)\">\r\n\t\t\t\t\t\t\t详情\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\tstyle=\"width: 25%\"\r\n\t\t\t\t\t\t\tclass=\"btn btn-outline-primary btn-sm\"\r\n\t\t\t\t\t\t\tdata-bs-toggle=\"modal\"\r\n\t\t\t\t\t\t\t:data-bs-target=\"'#updateAttendance-' + index\">\r\n\t\t\t\t\t\t\t更新考勤\r\n\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t<!-- Modal -->\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclass=\"modal fade\"\r\n\t\t\t\t\t\t\t:id=\"'updateAttendance-' + index\"\r\n\t\t\t\t\t\t\ttabindex=\"-1\"\r\n\t\t\t\t\t\t\taria-labelledby=\"exampleModalLabel\"\r\n\t\t\t\t\t\t\taria-hidden=\"true\">\r\n\t\t\t\t\t\t\t<div class=\"modal-dialog\">\r\n\t\t\t\t\t\t\t\t<div class=\"modal-content\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"modal-header\">\r\n\t\t\t\t\t\t\t\t\t\t<h1\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"modal-title fs-5\"\r\n\t\t\t\t\t\t\t\t\t\t\tid=\"exampleModalLabel\"\r\n\t\t\t\t\t\t\t\t\t\t\t>警告</h1\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"btn-close\"\r\n\t\t\t\t\t\t\t\t\t\t\tdata-bs-dismiss=\"modal\"\r\n\t\t\t\t\t\t\t\t\t\t\taria-label=\"Close\"></button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"modal-body\"\r\n\t\t\t\t\t\t\t\t\t\t><el-tag>缺勤</el-tag>\r\n\t\t\t\t\t\t\t\t\t\t<el-tag type=\"success\">正常出勤</el-tag>\r\n\t\t\t\t\t\t\t\t\t\t<el-tag type=\"info\">迟到</el-tag>\r\n\t\t\t\t\t\t\t\t\t\t<el-tag type=\"warning\">早退</el-tag>\r\n\t\t\t\t\t\t\t\t\t\t<el-tag type=\"danger\">加班</el-tag>\r\n\t\t\t\t\t\t\t\t\t\t<el-input\r\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"input\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"请更新考勤信息\"></el-input>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tslot=\"footer\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"dialog-footer\">\r\n\t\t\t\t\t\t\t\t\t\t</span\r\n\t\t\t\t\t\t\t\t\t></div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"modal-footer\">\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"btn btn-secondary\"\r\n\t\t\t\t\t\t\t\t\t\t\tdata-bs-dismiss=\"modal\"\r\n\t\t\t\t\t\t\t\t\t\t\t>取消</button\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"btn btn-danger\"\r\n\t\t\t\t\t\t\t\t\t\t\t@click=\"updateAttendance\"\r\n\t\t\t\t\t\t\t\t\t\t\t>提交</button\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t</tbody>\r\n\t\t</table>\r\n\t\t<el-dialog\r\n\t\t\ttitle=\"提示\"\r\n\t\t\t:visible.sync=\"dialogVisible\"\r\n\t\t\twidth=\"30%\"\r\n\t\t\t:before-close=\"handleClose\">\r\n\t\t\t<el-tag>缺勤</el-tag>\r\n\t\t\t<el-tag type=\"success\">正常出勤</el-tag>\r\n\t\t\t<el-tag type=\"info\">迟到</el-tag>\r\n\t\t\t<el-tag type=\"warning\">早退</el-tag>\r\n\t\t\t<el-tag type=\"danger\">加班</el-tag>\r\n\t\t\t<el-input v-model=\"input\" placeholder=\"请更新考勤信息\"></el-input>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"updateAttendance\"\r\n\t\t\t\t\t>确 定</el-button\r\n\t\t\t\t>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\nexport default {\r\n\tinject: [\"reload\"],\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tdialogVisible: false,\r\n\t\t\tnowEmployeeid: \"\",\r\n\t\t\tuser: \"\",\r\n\t\t\tmyname: \"\",\r\n\t\t\tlevel: \"\",\r\n\t\t\tstatus: \"\",\r\n\t\t\tgender: \"\",\r\n\t\t\tphoto: \"\",\r\n\t\t\tethnicity: \"\",\r\n\t\t\tbirthday: \"\",\r\n\t\t\tpoliticalFace: \"\",\r\n\t\t\teducation: \"\",\r\n\t\t\tid_card: \"\",\r\n\t\t\tphone_number: \"\",\r\n\t\t\te_mail: \"\",\r\n\t\t\tusername: \"\",\r\n\t\t\taccount: \"\",\r\n\t\t\tdid: \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t\tinput: \"\",\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\thandleClose(done) {\r\n\t\t\tthis.$confirm(\"确认关闭？\")\r\n\t\t\t\t.then((_) => {\r\n\t\t\t\t\tdone();\r\n\t\t\t\t})\r\n\t\t\t\t.catch((_) => {});\r\n\t\t},\r\n\t\tshowDetail(id) {\r\n\t\t\tthis.$store.dispatch(\"getAttendance\", id).then((res) => {\r\n\t\t\t\tthis.$alert(\r\n\t\t\t\t\t`<strong>缺勤:${this.attendance.absence}次 出席:${this.attendance.attendance}次  迟到:${this.attendance.late}次 早退:${this.attendance.leave_early}次 加班:${this.attendance.overtime}次</strong>`,\r\n\t\t\t\t\t\"考勤信息\",\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdangerouslyUseHTMLString: true,\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t},\r\n\t\tupdateAttendance() {\r\n\t\t\tthis.dialogVisible = false;\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tid: this.nowEmployeeid,\r\n\t\t\t\tstatus: this.input,\r\n\t\t\t};\r\n\t\t\tthis.$store.dispatch(\"updateAttendance\", data).then((res) => {\r\n\t\t\t\talert(res);\r\n\t\t\t});\r\n\t\t},\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState({\r\n\t\t\tuserlist: (state) => state.userlist,\r\n\t\t\tattendance: (state) => state.attendance,\r\n\t\t}),\r\n\t},\r\n\tmounted: function () {\r\n\t\tthis.$store.dispatch(\"getList\");\r\n\t},\r\n};\r\n</script>\r\n\r\n<style scoped></style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}