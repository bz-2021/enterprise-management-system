{"ast":null,"code":"import Vue from 'vue';\nimport Vuex from 'vuex';\nVue.use(Vuex);\nimport { reqGetList, reqLogin } from \"@/api\";\nconst state = {\n  code: '',\n  token: localStorage.getItem('TOKEN'),\n  userInfo: '',\n  userlist: {}\n};\nconst mutations = {\n  USERLOGIN(state, token) {\n    state.token = token;\n  },\n  GETLIST(state, userlist) {\n    state.userlist = userlist;\n  }\n};\nconst actions = {\n  //登录\n  async userLogin({\n    commit\n  }, data) {\n    let result = await reqLogin(data.name, data.password);\n    console.log(result);\n    // 服务器下发token 通过带token向服务器要资源\n    if (result.error_message == 'success') {\n      commit('USERLOGIN', result.token);\n      // 持久化存储token\n      localStorage.setItem(\"TOKEN\", result.token);\n      return 'ok';\n    } else if (result.status == '403') return Promise.reject(new Error('faile'));\n  },\n  //获得手下职员的列表信息\n  async getList({\n    commit\n  }) {\n    let result = await reqGetList(state.token);\n    if (result.length > 0) {\n      commit('GETLIST', result);\n      return 'ok';\n    } else return Promise.reject(new Error('faile'));\n  }\n};\nconst getter = {};\nVue.config.devtools = true;\nexport default new Vuex.Store({\n  state,\n  mutations,\n  actions,\n  getter\n});","map":{"version":3,"names":["Vue","Vuex","use","reqGetList","reqLogin","state","code","token","localStorage","getItem","userInfo","userlist","mutations","USERLOGIN","GETLIST","actions","userLogin","commit","data","result","name","password","console","log","error_message","setItem","status","Promise","reject","Error","getList","length","getter","config","devtools","Store"],"sources":["D:/bz2021/EnterpriseManagementSystem/frontend/src/store/index.js"],"sourcesContent":["import Vue from 'vue';\r\nimport Vuex from 'vuex';\r\nVue.use(Vuex);\r\n\r\n\r\nimport { reqGetList, reqLogin } from \"@/api\";\r\nconst state = {\r\n    code: '',\r\n    token: localStorage.getItem('TOKEN'),\r\n    userInfo: '',\r\n    userlist: {}\r\n};\r\nconst mutations = {\r\n    USERLOGIN(state, token) {\r\n        state.token = token\r\n    },\r\n    GETLIST(state, userlist) {\r\n        state.userlist = userlist\r\n    }\r\n};\r\nconst actions = {\r\n    //登录\r\n    async userLogin({ commit }, data) {\r\n        let result = await reqLogin(data.name, data.password)\r\n        console.log(result);\r\n        // 服务器下发token 通过带token向服务器要资源\r\n        if (result.error_message == 'success') {\r\n            commit('USERLOGIN', result.token)\r\n            // 持久化存储token\r\n            localStorage.setItem(\"TOKEN\", result.token)\r\n            return 'ok'\r\n        }\r\n        else if (result.status == '403')\r\n            return Promise.reject(new Error('faile'))\r\n    },\r\n    //获得手下职员的列表信息\r\n    async getList({ commit }) {\r\n\r\n        let result = await reqGetList(state.token);\r\n        if (result.length > 0) {\r\n            commit('GETLIST', result)\r\n            return 'ok'\r\n        } else\r\n            return Promise.reject(new Error('faile'))\r\n    }\r\n};\r\nconst getter = {};\r\nVue.config.devtools = true\r\nexport default new Vuex.Store({\r\n    state,\r\n    mutations,\r\n    actions,\r\n    getter\r\n});"],"mappings":"AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,IAAI,MAAM,MAAM;AACvBD,GAAG,CAACE,GAAG,CAACD,IAAI,CAAC;AAGb,SAASE,UAAU,EAAEC,QAAQ,QAAQ,OAAO;AAC5C,MAAMC,KAAK,GAAG;EACVC,IAAI,EAAE,EAAE;EACRC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EACpCC,QAAQ,EAAE,EAAE;EACZC,QAAQ,EAAE,CAAC;AACf,CAAC;AACD,MAAMC,SAAS,GAAG;EACdC,SAAS,CAACR,KAAK,EAAEE,KAAK,EAAE;IACpBF,KAAK,CAACE,KAAK,GAAGA,KAAK;EACvB,CAAC;EACDO,OAAO,CAACT,KAAK,EAAEM,QAAQ,EAAE;IACrBN,KAAK,CAACM,QAAQ,GAAGA,QAAQ;EAC7B;AACJ,CAAC;AACD,MAAMI,OAAO,GAAG;EACZ;EACA,MAAMC,SAAS,CAAC;IAAEC;EAAO,CAAC,EAAEC,IAAI,EAAE;IAC9B,IAAIC,MAAM,GAAG,MAAMf,QAAQ,CAACc,IAAI,CAACE,IAAI,EAAEF,IAAI,CAACG,QAAQ,CAAC;IACrDC,OAAO,CAACC,GAAG,CAACJ,MAAM,CAAC;IACnB;IACA,IAAIA,MAAM,CAACK,aAAa,IAAI,SAAS,EAAE;MACnCP,MAAM,CAAC,WAAW,EAAEE,MAAM,CAACZ,KAAK,CAAC;MACjC;MACAC,YAAY,CAACiB,OAAO,CAAC,OAAO,EAAEN,MAAM,CAACZ,KAAK,CAAC;MAC3C,OAAO,IAAI;IACf,CAAC,MACI,IAAIY,MAAM,CAACO,MAAM,IAAI,KAAK,EAC3B,OAAOC,OAAO,CAACC,MAAM,CAAC,IAAIC,KAAK,CAAC,OAAO,CAAC,CAAC;EACjD,CAAC;EACD;EACA,MAAMC,OAAO,CAAC;IAAEb;EAAO,CAAC,EAAE;IAEtB,IAAIE,MAAM,GAAG,MAAMhB,UAAU,CAACE,KAAK,CAACE,KAAK,CAAC;IAC1C,IAAIY,MAAM,CAACY,MAAM,GAAG,CAAC,EAAE;MACnBd,MAAM,CAAC,SAAS,EAAEE,MAAM,CAAC;MACzB,OAAO,IAAI;IACf,CAAC,MACG,OAAOQ,OAAO,CAACC,MAAM,CAAC,IAAIC,KAAK,CAAC,OAAO,CAAC,CAAC;EACjD;AACJ,CAAC;AACD,MAAMG,MAAM,GAAG,CAAC,CAAC;AACjBhC,GAAG,CAACiC,MAAM,CAACC,QAAQ,GAAG,IAAI;AAC1B,eAAe,IAAIjC,IAAI,CAACkC,KAAK,CAAC;EAC1B9B,KAAK;EACLO,SAAS;EACTG,OAAO;EACPiB;AACJ,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}